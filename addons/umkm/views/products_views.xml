<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Products List View -->
        <record id="view_umkm_products_list" model="ir.ui.view">
            <field name="name">umkm.products.list</field>
            <field name="model">umkm.products</field>
            <field name="arch" type="xml">
                <list string="Products" sample="1" multi_edit="1" create="false">
                    <field name="image_1920" widget="image" options="{'size': [24, 24], 'img_class': 'o_avatar rounded'}" width="30" nolabel="1"/>
                    <field name="name" string="Name"/>
                    <field name="_type" string="Type" optional="show"/>
                    <field name="price_display" optional="show"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="price" invisible="1"/>
                    <field name="netto" optional="hide"/>
                    <field name="kemasan_type" optional="hide"/>
                    <field name="profile_id" optional="hide"/>
                </list>
            </field>
        </record>

        <!-- Products Form View -->
        <record id="view_umkm_products_form" model="ir.ui.view">
            <field name="name">umkm.products.form</field>
            <field name="model">umkm.products</field>
            <field name="arch" type="xml">
                <form string="Products" create="false">
                <sheet>
                    <div class="oe_button_box" name="button_box"/>
                    <div class="mb8">
                        <div class="d-flex gap-3">
                            <field name="image_1920" widget="image" options="{'preview_image': 'image_1920', 'size': [130,130], 'img_class': 'rounded border'}"/>
                            <div class="d-flex flex-column flex-grow-1">
                                <h1 class="mb-0 w-md-75">
                                    <field options="{'line_breaks': False}" widget="text" class="text-break d-block" name="name" default_focus="1" placeholder="e.g. Nasi Goreng Spesial"/>
                                </h1>
                                <div class="d-flex align-items-baseline w-md-50">
                                    <i class="fa fa-fw me-1 fa-tag text-primary" title="Type"/>
                                    <field name="_type" class="w-100" placeholder="Product Type"/>
                                </div>
                                <div class="d-flex align-items-baseline w-md-50">
                                    <i class="fa fa-fw me-1 fa-money text-primary" title="Price"/>
                                    <field name="price" class="w-100" placeholder="Price"/>
                                    <field name="currency_id" invisible="1"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <group>
                        <group>
                            <field name="profile_id" readonly="1" placeholder="UMKM Profile"/>
                            <field name="kemasan_type" placeholder="Packaging Type"/>
                            <div class="o_row">
                                <field name="netto" placeholder="Net Weight"/>
                                <field name="netto_unit" nolabel="1"/>
                            </div>
                        </group>
                        <group>
                            <field name="komposisi" placeholder="Composition"/>
                            <field name="description" placeholder="Description"/>
                        </group>
                    </group>
                    <notebook colspan="4">
                        <page name="certificates" string="Certificates">
                            <group col="2">
                                <group string="PIRT">
                                    <field name="pirt_status" placeholder="Pilih status PIRT"/>
                                    <field name="pirt_no" invisible="pirt_status not in ['owned', 'owned_created']" placeholder="Masukkan nomor PIRT"/>
                                    <field name="pirt_file" filename="pirt_no" invisible="pirt_status not in ['owned', 'owned_created']" placeholder="Unggah file PIRT"/>
                                </group>
                                <group string="Halal">
                                    <field name="halal_status" placeholder="Pilih status Halal"/>
                                    <field name="halal_no" invisible="halal_status not in ['owned', 'owned_created']" placeholder="Masukkan nomor Halal"/>
                                    <field name="halal_file" filename="halal_no" invisible="halal_status not in ['owned', 'owned_created']" placeholder="Unggah file Halal"/>
                                </group>
                                <group string="BPOM">
                                    <field name="bpom_status" placeholder="Pilih status BPOM"/>
                                    <field name="bpom_no" invisible="bpom_status not in ['owned', 'owned_created']" placeholder="Masukkan nomor BPOM"/>
                                    <field name="bpom_file" filename="bpom_no" invisible="bpom_status not in ['owned', 'owned_created']" placeholder="Unggah file BPOM"/>
                                </group>
                            </group>
                        </page>
                        <page name="packaging" string="Packaging">
                            <field name="kemasan_file" placeholder="Unggah file kemasan"/>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
                </form>
            </field>
        </record>

        <!-- Products Kanban View (Catalog) -->
        <record id="view_umkm_products_kanban" model="ir.ui.view">
            <field name="name">umkm.products.kanban</field>
            <field name="model">umkm.products</field>
            <field name="arch" type="xml">
                <kanban sample="1" create="false">
                    <field name="image_1920"/>
                    <field name="_type"/>
                    <field name="price"/>
                    <field name="price_display"/>
                    <field name="currency_id"/>
                    <field name="profile_id"/>
                    <field name="netto"/>
                    <field name="netto_display"/>
                    <!-- <field name="kemasan_type"/> -->
                    <field name="netto"/>
                    <templates>
                        <t t-name="card" class="flex-row">
                            <aside class="o_kanban_aside_full">
                                <div class="position-relative w-100 h-auto m-0">
                                    <field name="image_1920" alt="Product image" class="h-100" widget="image" options="{'img_class': 'object-fit-contain'}"/>
                                </div>
                            </aside>
                            <main class="ps-2">
                                <div class="mb-1">
                                    <field name="name" class="mb-0 fw-bold fs-5"/>
                                </div>
                                <div t-if="record.profile_id.raw_value">
                                    <i class="fa fa-fw me-1 fa-user text-primary" title="Owner"/>
                                    <field name="profile_id"/>
                                </div>
                                <div t-if="record._type.raw_value" class="text-truncate">
                                    <i class="fa fa-fw me-1 fa-tag text-primary" title="Type"/>
                                    <field name="_type"/>
                                </div>
                                <div t-if="record.price.raw_value">
                                    <i class="fa fa-fw me-1 fa-money text-primary" title="Price"/>
                                    <field name="price_display"/>
                                    <field name="currency_id" invisible="1"/>
                                </div>
                                <div t-if="record.netto.raw_value">
                                    <i class="fa fa-fw me-1 fa-balance-scale text-primary" title="Weight"/>
                                    <field name="netto_display"/>
                                </div>
                                <!-- <div t-if="record.kemasan_type.raw_value">
                                    <i class="fa fa-fw me-1 fa-dropbox text-primary" title="Packaging"/>
                                    <field name="kemasan_type"/>
                                </div> -->
                            </main>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <!-- Products View for UMKM Profile -->
        <record id="view_umkm_products_forumkmprofile_list" model="ir.ui.view">
            <field name="name">umkm.products.forumkmprofile.list</field>
            <field name="model">umkm.products</field>
            <field name="arch" type="xml">
                <list>
                    <field name="name" placeholder="Masukkan nama produk"/>
                    <field name="_type" placeholder="Pilih jenis produk"/>
                    <field name="price" placeholder="Masukkan harga"/>
                    <field name="currency_id" invisible="1"/>
                </list>
            </field>
        </record>

        <!-- Products Action -->
        <record id="action_umkm_products" model="ir.actions.act_window">
            <field name="name">Produk UMKM</field>
            <field name="res_model">umkm.products</field>
            <field name="view_mode">kanban,list,form</field>
            <field name="view_id" ref="view_umkm_products_kanban"/>
        </record>
    </data>
</odoo>